
inventory = ["Старый потрёпанный меч", "Кулон с выцветшим портретом", "Камень"]
knows_about_haron = False
found_money_pouch = False
can_go_to_mines = False

def show_inventory():
    print("\nВаш инвентарь:")
    for item in inventory:
        print(f"- {item}")
    print()
def wander_in_fog():
    print("\nВы решаете идти дальше, но густой туман, словно капкан, постепенно затягивает вас. Вскоре вы снова оказываетесь у того места откуда начинали\n")

def explore_graveyard():
    global knows_about_haron
    print("Вы решили осмотреться, бродя в поисках чего то выделяющегося вы стали замечать, что на надгробиях видны выцарапанные знаки\n Постмотрев на них вы поняли что вам нужно найти могилу некоего Харона.")
    knows_about_haron = True
    print("\nТеперь у вас есть цель: найти могилу Харона. Доступна новая команда: 'Искать могилу'.")

def search_for_haron_grave():
    print("\nТеперь зная что искать вы вглядывались в надписи на надгробьях\n В один момент вы заметили нужное вам имя\nВы решили подойти ближе, Вы прочли ещё раз имя владельца, это был вам нужный Харон")
    print("\nВнезапно возник ослепляющий свет ярче солнечного, пытаясь найти источник Вы понимаете, что это была печать на рукаве ваших доспехов.\n Вскоре яркий наполняет всё вокруг светом, будто сжигая само пространство вокруг вас...")
    print("\nВы переходите на второй уровень!")
    level_two()

def Game():
    print("Темно.....\n Вы открываете глаза, вокруг множество старых, мрачных могил, часть из которых разрыты или разрушены.\n В вас посеялось чувство что вам нужно идти. ")

    while True:
        print("Выберите действие:")
        print("1 - Осмотреться")
        print("2 - Инвентарь")
        print("3 - Пойти дальше")

        if knows_about_haron:
            print("4 - Искать могилу")

        choice = input("Введите номер действия: ")

        if choice == "1":
            explore_graveyard()
        elif choice == "2":
            show_inventory()
        elif choice == "3":
            if knows_about_haron:
                print("Вы можете использовать команду 'Искать могилу' для продолжения.\n")
            else:
                wander_in_fog()
        elif choice == "4" and knows_about_haron:
            search_for_haron_grave()
            break
        else:
            print("Неверный выбор. Попробуйте снова.\n")

# Второй уровень
def level_two():
    global inventory, found_money_pouch

    print("\nСнова темно.....\nПосле яркой вспышки, Вы оказываетесь на дороге проходящее через поле, окружённое лесом. Вдали мерцают ели заметные источники света.")

    while True:
        print("\nВыберите действие:")
        print("1 - Осмотреться")
        print("2 - Проверить печать")

        if "Камень" in inventory:
            print("3 - Кинуть камень в куст поблизости")

        print("4 - Пойти в сторону света")
        print("5 - Инвентарь")

        choice = input("Введите номер действия: ")

        if choice == "1":
            print("\nВы осматриваетесь и замечаете неподалёку тёмный, похожий на пастуха с овцами.")
            print("\nВыберите действие:")
            print("1 - Пойти к силуэту")
            print("2 - Не обращать внимания")

            siluet = input("Введите номер действия: ")

            if siluet == "1":
                print("Вы подходите ближе и замечается, что это нежить, окружённая ожившими телами овец.")
                print("Нежить замечает вас, и начинается бой.")

                print("\nВыберите действие:")
                print("1 - Принять бой")
                print("2 - Убежать")

                fight_choice = input("Введите номер действия: ")

                if fight_choice == "1":
                    print("\nВы принимаете бой и побеждаете нежить, получив мешочек с деньгами!")
                    inventory.append("Мешочек с деньгами")
                    found_money_pouch = True
                elif fight_choice == "2":
                    print("\nВы решаете не вступать в бой и быстро возвращаетесь на дорогу.")
                    print("Теперь у вас остались другие варианты.")
                continue

        elif choice == "2":
            print("\nВы проверяете свою печать. Она светится, но слабее, чем прежде. Возможно, это означает, что вы на верном пути.")

        elif choice == "3" and "Камень" in inventory:
            inventory.remove("Камень")
            print("\nВы кидаете камень в куст, вы думаете над смыслом своих действий, лишь только 2 вопроса в голове - Зачем? и Откуда у вас камень?")
            print("Вы потеряли камень из инвентаря.")

        elif choice == "4":
            print("\nВы решаете пойти в сторону слабых источников света и направляетесь к ним, в надежде найти город или укрытию.")
            print("Вы переходите к следующему этапу уровня 2.1.\n")
            level_2_1()

        elif choice == "5":
            show_inventory()

        else:
            print("Неверный выбор. Попробуйте снова.\n")

def level_2_1():
    global inventory, can_go_to_mines

    print("\nВы подошли к огням и вскоре оказались в маленьком городке. Осмотревшись, вы заметили здание гильдии авантюристов.")
    print("Внутри вы видите кузнеца и доску объявлений.")

    while True:
        print("\nВыберите действие:")
        print("1 - Подойти к кузнецу")
        print("2 - Подойти к доске объявлений")

        choice = input("Введите номер действия: ")

        if choice == "1":
            approach_blacksmith()
            break
        elif choice == "2":
            approach_bulletin_board()
            break
        else:
            print("Неверный выбор. Попробуйте снова.\n")

def approach_blacksmith():
    global inventory

    print("\nВы подходите к кузнецу.")
    print("Кузнец приветствует вас и предлагает два меча:")
    print("1 - Это клинок, пронзивший тело самого выплощения духа, что был покровителем рода лесных эльфов. Цена: 5 мешков с деньгами.")
    print("2 - Меч из переплавленных элементов железной брони. Цена: 1 мешочек денег.")
    print("3 - Уйти от кузнеца")

    while True:
        choice = input("\nВыберите меч для покупки (1 или 2) или введите 'уйти' для выхода: ")

        if choice == "1":
            if inventory.count("Мешочек с деньгами") >= 5:
                print("\nВы покупаете меч, и ваш старый меч выбрасывается.")
                inventory = [item for item in inventory if item != "Старый потрёпанный меч"]
                inventory.append("Клинок эльфов")
                for _ in range(5):
                    inventory.remove("Мешочек с деньгами")
                print("Вы приобрели: Клинок эльфов.")
                break
            else:
                print("У вас недостаточно мешочков с деньгами для покупки этого меча.")

        elif choice == "2":
            if inventory.count("Мешочек с деньгами") >= 1:
                print("\nВы покупаете меч, и ваш старый меч выбрасывается.")
                inventory = [item for item in inventory if item != "Старый потрёпанный меч"]
                inventory.append("Меч из железной брони")
                inventory.remove("Мешочек с деньгами")
                print("Вы приобрели: Меч из железной брони.")
                break
            else:
                print("У вас недостаточно мешочков с деньгами для покупки этого меча.")

        elif choice.lower() == "уйти":
            print("Вы решили уйти от кузнеца.")
            break
        else:
            print("Неверный выбор. Попробуйте снова.\n")

    action_after_blacksmith()

def action_after_blacksmith():
    while True:
        print("\nВыберите действие:")
        print("1 - Подойти к доске объявлений")
        print("2 - Пойти в шахты" if can_go_to_mines else "2 - Пойти в шахты (доступно после подхода к доске)")
        print("3 - Вернуться к кузнецу")

        choice = input("Введите номер действия: ")

        if choice == "1":
            approach_bulletin_board()
            break
        elif choice == "2" and can_go_to_mines:
            print("Вы решаете отправиться в шахты, чтобы выполнить задание.")
            break
        elif choice == "3":
            approach_blacksmith()
            break
        else:
            print("Неверный выбор. Попробуйте снова.\n")

def approach_bulletin_board():
    global can_go_to_mines
    print("\nВы подходите к доске объявлений и замечаете заказ:")
    print("\"В заброшенных шахтах Сайрен был замечен монстр, от чьих рук уже погибло не менее пяти десятков авантюристов, и имя ему Меченый кобальт.\"")
    print("Вы решаете отправиться в шахты, чтобы выполнить это задание.")

    can_go_to_mines = True

    action_after_bulletin_board()

def action_after_bulletin_board():
    while True:
        print("\nВыберите действие:")
        print("1 - Пойти в шахты")
        print("2 - Вернуться к кузнецу")
        print("3 - Подойти к доске объявлений снова")

        choice = input("Введите номер действия: ")

        if choice == "1":
            print("Вы решаете отправиться в шахты, чтобы выполнить это задание.")
            level_three()
            break
        elif choice == "2":
            approach_blacksmith()
            break
        elif choice == "3":
            print("Вы снова смотрите на доску объявлений, но информация остаётся прежней.")
        else:
            print("Неверный выбор. Попробуйте снова.\n")
def level_three():
    print("\nВы приходите к шахтам Сайрен. Спускаясь по извивающимся туннелям, вы чувствуете, как темнота окутывает вас.")
    print("После долгой ходьбы вы вдруг оказываетесь в тупике. Печать на вашем рукаве начинает светиться, и на стене тупика проявляется надпись:")
    print("\"М@%*а помогает нам. Она не приносит ни смерти, ни боли. Но если ты отречёшься от @чт?№ы, убьёшь её в своей душе - ты всё равно что мёртв.\"")

    while True:
        answer = input("\nПроизнесите слово: ")

        if answer == "Мечта":
            print("\nСлова, произнесённые вами, заполняют воздух энергией. Тупик начинает рассеиваться, и перед вами открывается путь!")
            print("Вы наполняеться чувствами, ведущие вас идти вперед")
            battle_with_cobalt()
            break
        else:
            print("\nНеправильно. Попробуйте снова.\n")


def battle_with_cobalt():
    print("\nНачалась битва с Меченым кобальтом!")
    if "Клинок эльфов" in inventory:
        print("\nС вашим Клинком эльфов, победа была простой.")
        print("Вы чувствуете, что это было нечестно, но вы всё равно одержали победу.")
    elif "Меч из железной брони" in inventory:
        print("\nС Мечом из железной брони вы сражались с трудом, но победили.")
        print("Вы почувствовали сильную усталость и решили отдохнуть.")
    else:
        print("\nУ вас нет подходящего оружия для битвы и вы проигрываете.")
    print("\n 1 акт закончен ")
    exit()
Game()